---
title: 網站上傳圖片至網路資料夾(NAS)
date: 2023-01-17 10:33:00
categories:
  - ASP.NET
tags:
  - NAS
---

網站需要上傳大量圖片與影片
規劃儲存至網路資料夾(NAS)

<!--more-->
## 設定

測試名稱
Server本機帳號：testuser
NAS本機帳號：testuser
NAS圖片資料夾：NAS_img
IIS虛擬目錄：NAS_img


### ASP.NET Web.config

```
<system.web>
<identity impersonate="true" userName="testuser(你的帳號)" password="你的密碼" />
</system.web>
```


### NAS

* 建立圖片資料夾(上傳圖片要存放的地方)
* 建立新的本機帳號，僅可以登入圖片資料夾的帳號(安全性)


### IIS(Server)

控制台>系統管理工具>電腦管理>本機使用者和群組>使用者
建立與NAS本機帳號相同的帳號密碼，ex：本機帳號(webuser)
勾選 密碼永久有效
![Image](https://github.com/3618321s/blog/raw/gh-pages/images/Project/Server新增本機帳號.jpg)


在網站根目錄>IIS管理權限>允許使用者>選取Windows>加入剛才建立的本機帳號(webuser)
![Image](https://github.com/3618321s/blog/raw/gh-pages/images/Project/IIS管理員.jpg)


在目錄下建立虛擬目錄
輸入別名(網站準備上傳的資料夾名稱)，ex：NAS_img
輸入實體位置 \\NAS位置\圖片資料夾名稱
點擊連線身分，選擇特定使用者，輸入使用者名稱和密碼，使用者名稱ex：SYNOLOGYNAS\本機帳號
![Image](https://github.com/3618321s/blog/raw/gh-pages/images/Project/新增目錄.jpg)


建立好之後在虛擬目錄處，點擊右鍵，轉換成應用程式

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files
Temporary ASP.NET Files這個資料夾加入本機帳號testuser，開啟寫入與讀取權限


## 最後成果

![Image](https://github.com/3618321s/blog/raw/gh-pages/images/Project/上傳成功.jpg)